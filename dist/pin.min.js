/** pin.js - v0.0.1 - 2015-05-19
* Copyright (c) 2015 Mauricio Soares;
* Licensed MIT 
*/


function Pin(a){this.el=document.querySelector(a),this.$parentt=this.el.parentNode,this.init()}Pin.prototype.init=function(){this.bind(),this.calcPositions(),this.onWindowScroll()},Pin.prototype.destroy=function(){this.setCss(),this.unbind()},Pin.prototype.calcPositions=function(){this.positions={offset:this.getOffset(this.el),parentOffset:this.getParentOffset(),stopTop:this.$parentt.offsetHeight+this.getOffset(this.$parentt).top-this.el.offsetHeight}},Pin.prototype.getOffset=function(a){var b=document.documentElement,c=a.getBoundingClientRect();return{top:c.top+window.pageYOffset-b.clientTop,left:c.left+window.pageXOffset-b.clientLeft}},Pin.prototype.getParentOffset=function(){return{left:this.el.offsetLeft}},Pin.prototype.bind=function(){this.reloadBind=this.reload.bind(this),this.onWindowScrollBind=this.onWindowScroll.bind(this),window.addEventListener("resize",this.reloadBind),window.addEventListener("scroll",this.onWindowScrollBind)},Pin.prototype.unbind=function(){window.removeEventListener("resize",this.reloadBind),window.removeEventListener("scroll",this.onWindowScrollBind)},Pin.prototype.reload=function(){this.setCss(),this.calcPositions(),this.onWindowScroll()},Pin.prototype.onWindowScroll=function(){var a;if(!this.windowIsSmaller()&&!(this.touchBottom()||(a=window.scrollY-this.positions.offset.top,a>0&&"fixed"===this.getStyle(this.el,"position")||0>=a&&("relative"===this.getStyle(this.el,"position")||"static"===this.getStyle(this.el,"position")))))return a>0?void this.setCss({position:"fixed",left:this.toPx(this.positions.offset.left),top:0,marginLeft:0,marginTop:0,bottom:""}):void this.setCss()},Pin.prototype.touchBottom=function(){return window.scrollY>this.positions.stopTop?"absolute"===this.getStyle(this.el,"position")?!0:(this.setCss({top:"",marginLeft:"",bottom:0,position:"absolute",left:this.toPx(this.positions.parentOffset.left)}),!0):!1},Pin.prototype.setCss=function(a){if(!a)return void this.el.removeAttribute("style");for(var b in a)this.el.style[b]=a[b]},Pin.prototype.getStyle=function(a,b){return window.getComputedStyle(a)[b]},Pin.prototype.toPx=function(a){return a+"px"},Pin.prototype.isMobile=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},Pin.prototype.windowIsSmaller=function(){return window.innerHeight<this.el.offsetHeight};
//# sourceMappingURL=pin.min.js.map